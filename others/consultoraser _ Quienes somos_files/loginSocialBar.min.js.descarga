"use strict";define("loginSocialBar/components/loginSocialBar",["react","lodash","core","santaProps","utils"],function(t,e,i,o,n){function r(t){return t.loggedInMember===c.AVATAR||t.loggedInMember===c.BOTH}function a(t){return t.loggedInMember===c.TEXT||t.loggedInMember===c.BOTH}function s(t){return e.isArray(t.iconItems)&&t.iconItems.length>0}function d(t){return{isLoggedIn:t.isLoggedIn,$loggedIn:t.isLoggedIn?"loggedIn":"loggedOut",$direction:"rtl"===t.compProp.buttonsDirection?"rtl":"ltr",$dropdownDirection:"right"===t.compProp.dropDownTextAlignment?"right":"left",$iconsOnly:t.compData.loggedInMember,$noButtons:s(t)?"buttons":"noButtons"}}function l(t){switch(t.compProp.dropDownTextAlignment){case"left":return"rtl"===t.compProp.buttonsDirection?"row-reverse":"row";case"right":return"rtl"===t.compProp.buttonsDirection?"row":"row-reverse";default:return"row"}}function p(t){switch(t.compProp.buttonsAlignment){case"left":return"rtl"===t.compProp.buttonsDirection?"flex-end":"flex-start";case"right":return"rtl"===t.compProp.buttonsDirection?"flex-start":"flex-end";case"center":return"center";default:return"flex-end"}}var g=n.linkRenderer,c={AVATAR:"avatarOnly",TEXT:"textOnly",BOTH:"avatarAndText"},u={LOGGED_IN:"loggedIn",LOGGED_IN_MENU_OPENED:"loggedInMenuOpened",LOGGED_OUT:"loggedOut"};return{displayName:"loginSocialBar",mixins:[i.compMixins.skinBasedComp],propTypes:{compData:o.Types.Component.compData.isRequired,compProp:o.Types.Component.compProp.isRequired,isMobileView:o.Types.isMobileView.isRequired,rootNavigationInfo:o.Types.Component.rootNavigationInfo.isRequired,linkRenderInfo:o.Types.Link.linkRenderInfo.isRequired,componentPreviewState:o.Types.RenderFlags.componentPreviewState,componentViewMode:o.Types.RenderFlags.componentViewMode,logout:o.Types.SiteMembersSantaTypes.logout.isRequired,showAuthenticationDialog:o.Types.SiteMembersSantaTypes.showAuthenticationDialog.isRequired,serviceTopology:o.Types.ServiceTopology.serviceTopology.isRequired,isLoggedIn:o.Types.MemberLogin.isLoggedIn.isRequired,language:o.Types.MemberLogin.language.isRequired,memberName:o.Types.MemberLogin.memberName.isRequired,memberAvatar:o.Types.MemberLogin.memberAvatar.isRequired,menuItems:o.Types.MemberLogin.menuItems,iconItems:o.Types.MemberLogin.iconItems},statics:{useSantaTypes:!0},getInitialState:function(){return e.assign(d(this.props),{isMenuOpen:!1})},createLoginSocialButtonComponent:function(t,i){return this.createChildComponent(this.props.compData,"wysiwyg.viewer.components.LoginSocialButton","button",e.assign(t,{ref:"button"+i,id:this.props.id+"button"+i,style:{width:this.props.compProp.iconSize,height:this.props.compProp.iconSize,marginRight:"rtl"===this.props.compProp.buttonsDirection?"auto":12,marginLeft:"rtl"===this.props.compProp.buttonsDirection?12:"auto"},linkRenderInfo:this.props.linkRenderInfo,rootNavigationInfo:this.props.rootNavigationInfo,iconSize:this.props.compProp.iconSize,buttonsDirection:this.props.compProp.buttonsDirection}))},getButtonsToRender:function(){return s(this.props)?e.map(this.props.iconItems,this.createLoginSocialButtonComponent):null},onUserClick:function(){this.registerReLayout(),this.setState({isMenuOpen:!this.state.isMenuOpen})},onLogout:function(){if(this.getLogoutFunction){var t=this.getLogoutFunction(this.props).call(this);e.isFunction(t)&&t.call(this)}else this.setState({isMenuOpen:!1}),this.props.logout(this.props.language)},getMenuItems:function(){var i=e.filter(this.props.menuItems,this.props.isMobileView?"isVisibleMobile":"isVisible"),o=e.concat(i||[],{label:this.props.compData.logOutText||"Log Out",onClick:this.onLogout}),n=l(this.props),r=o.length-2,a=o.length-1;return e.map(o,function(i,o){var s={};return i.link&&(s=g.renderLink(i.link,this.props.linkRenderInfo,this.props.rootNavigationInfo)),0===o&&(s["data-preview"]=this.props.componentPreviewState),t.DOM.li({key:"item"+o,children:[t.DOM.a(e.assign({children:[t.DOM.div({children:i.label}),e.isNil(i.displayCount)?null:t.DOM.div({children:i.displayCount})],style:{flexDirection:n,paddingTop:0===o?11:"initial",paddingBottom:o===a?11:"initial"}},s)),o===r?t.DOM.hr():null],onClick:i.onClick||null})}.bind(this))},componentWillReceiveProps:function(t){var i=d(t);e.isEqual(this.props.componentPreviewState,t.componentPreviewState)?e.isEqual(this.props.componentViewMode,t.componentViewMode)||(i.isMenuOpen=!1):e.includes(t.componentPreviewState,u.LOGGED_IN_MENU_OPENED)?i.isMenuOpen=!0:(!t.componentPreviewState||e.includes(t.componentPreviewState,u.LOGGED_IN)||e.includes(t.componentPreviewState,u.LOGGED_OUT))&&(i.isMenuOpen=!1),e.isMatch(this.state,i)||this.setState(i)},onLoginButtonClick:function(){this.setState({isMenuOpen:!1}),this.props.showAuthenticationDialog({language:this.props.language,appId:3})},renderMemberAvatar:function(){return t.DOM.img({src:this.props.memberAvatar,style:{width:this.props.compProp.iconSize,height:this.props.compProp.iconSize}})},getSkinProperties:function(){var i={"":{style:{direction:this.props.compProp.buttonsDirection||"ltr",justifyContent:p(this.props)}}};return this.state.isLoggedIn?e.assign(i,{buttons:{children:this.getButtonsToRender(),style:{display:s(this.props)?null:"none"}},user:{onClick:this.onUserClick,"data-preview":this.props.componentPreviewState},icon:{children:this.renderMemberAvatar(),style:{display:r(this.props.compData)?null:"none"}},text:{children:this.props.memberName,style:{display:a(this.props.compData)?null:"none"}},dropdownMenu:{children:t.DOM.ul({children:this.getMenuItems()}),style:{display:this.state.isMenuOpen?null:"none"}}}):e.assign(i,{login:{children:[this.renderMemberAvatar(),this.props.compData.loggedOutText||"Login | Sign up"],onClick:this.onLoginButtonClick,"data-preview":this.props.componentPreviewState}}),i},getDefaultSkinName:function(){return"wysiwyg.viewer.skins.LoginSocialBarSkin"}}}),define("loginSocialBar/components/loginSocialButton",["react","lodash","core","utils"],function(t,e,i,o){var n=o.linkRenderer;return{displayName:"loginSocialButton",mixins:[i.compMixins.skinBasedComp],propTypes:{label:t.PropTypes.string,icon:t.PropTypes.string,link:t.PropTypes.object,counter:t.PropTypes.number,buttonsDirection:t.PropTypes.string},statics:{useSantaTypes:!0},onButtonClick:function(){this.props.onClick&&this.props.onClick()},createBadge:function(){var i=null;if(e.isNumber(this.props.displayCount)&&this.props.displayCount>0){var o=Math.floor(Math.log(this.props.displayCount)/Math.LN10+1),n=o<3?6:7,r=o>3?Math.floor(this.props.displayCount/1e3)+"k":this.props.displayCount;i=t.DOM.span({children:r,style:{paddingLeft:n,paddingRight:n}})}return i},getSkinProperties:function(){var e=this.props.iconSize/2,i="rtl"===this.props.buttonsDirection?{right:e,left:"auto"}:{left:e,right:"auto"};return{"":{onClick:this.onButtonClick},link:this.props.link?n.renderLink(this.props.link,this.props.linkRenderInfo,this.props.rootNavigationInfo):null,img:t.DOM.img({src:this.props.icon,style:this.props.style}),badge:{children:this.createBadge(),style:i}}},getDefaultSkinName:function(){return"wysiwyg.viewer.skins.LoginSocialButtonSkin"}}}),define("loginSocialBar/skins/skins.json",[],function(){var t={};return t["wysiwyg.viewer.skins.LoginSocialBarSkin"]={react:[["div","login",[],{}],["div","buttons",[],{}],["div","user",[],{},["div","icon",[],{}],["div","text",[],{}],["div","arrow",[],{},["svg",null,[],{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"8",viewBox:"0 0 14 8"},["path",null,[],{"fill-rule":"nonzero",d:"M1.707.293L.293 1.707l6 6a1 1 0 0 0 1.397.016l6-5.726L12.31.55 7.016 5.602 1.707.292z"}]]]],["div","dropdownMenu",[],{}]],exports:{button:{skin:"wysiwyg.viewer.skins.LoginSocialButtonSkin"}},params:{bg:"BG_COLOR",brw:"SIZE",brd:"COLOR_ALPHA",rd:"BORDER_RADIUS",shd:"BOX_SHADOW","bg-dd":"BG_COLOR","brw-dd":"SIZE","brd-dd":"COLOR_ALPHA","rd-dd":"BORDER_RADIUS","shd-dd":"BOX_SHADOW",fnt:"FONT","fnt-size-dd":"SIZE","txt-dd":"COLOR","bgh-dd":"BG_COLOR","txth-dd":"COLOR",txth:"COLOR",txt:"COLOR","bg-lgn":"BG_COLOR","brw-lgn":"SIZE","brd-lgn":"COLOR_ALPHA","rd-lgn":"BORDER_RADIUS","shd-lgn":"BOX_SHADOW","bgh-lgn":"BG_COLOR","txt-lgn":"COLOR","txth-lgn":"COLOR"},paramsDefaults:{bg:"color_10",brw:"1",brd:"color_15",rd:"3px",shd:"0 1px 4px rgba(0, 0, 0, 0.6)","bg-dd":"color_10","brw-dd":"1","brd-dd":"color_15","rd-dd":"3px","shd-dd":"0 1px 4px rgba(0, 0, 0, 0.6)",fnt:"font_7","fnt-size-dd":"14px","txt-dd":"color_18","bgh-dd":"color_12","txth-dd":"color_14",txth:"color_14",txt:"color_18","bg-lgn":"color_10","brw-lgn":"1","brd-lgn":"color_15","rd-lgn":"3px","shd-lgn":"0 1px 4px rgba(0, 0, 0, 0.6)","bgh-lgn":"color_12","txt-lgn":"color_18","txth-lgn":"color_14"},css:{"%":"display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;box-sizing:border-box;",'%[data-state~="loggedIn"]':"background-color:[bg];border:[brw] solid [brd];[rd]  [shd]",'%[data-state~="loggedIn"] %login':"display:none;",'%[data-state~="loggedIn"] %dropdownMenu':"z-index:99999;background-color:[bg-dd];border:[brw-dd] solid [brd-dd];box-sizing:border-box;[rd-dd]  [shd-dd]  [fnt]  font-size:[fnt-size-dd];position:absolute;min-width:110px;max-width:600px;",'%[data-state~="loggedIn"] %dropdownMenu a':"color:[txt-dd];padding-left:24px;padding-right:24px;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;line-height:200%;",'%[data-state~="loggedIn"] %dropdownMenu a:hover,%[data-state~="loggedIn"] %dropdownMenu a[data-preview~="hover"]':"background-color:[bgh-dd];color:[txth-dd];",'%[data-state~="loggedIn"] %dropdownMenu a > div:first-child':"overflow:hidden;text-overflow:ellipsis;white-space:nowrap;",'%[data-state~="loggedIn"] %dropdownMenu a > div:nth-child(2)':"opacity:0.6;",'%[data-state~="loggedIn"] %dropdownMenu hr':"margin:11px 15px 8px 15px;",'%[data-state~="loggedIn"] %user':"cursor:pointer;white-space:nowrap;padding-top:12px;padding-bottom:12px;",'%[data-state~="loggedIn"] %user:hover %text,%[data-state~="loggedIn"] %user[data-preview~="hover"] %text':"color:[txth];",'%[data-state~="loggedIn"] %user:hover %arrow path,%[data-state~="loggedIn"] %user[data-preview~="hover"] %arrow path':"fill:[txth];",'%[data-state~="loggedIn"] %icon':"display:inline-block;vertical-align:middle;",'%[data-state~="loggedIn"] %icon img':"border-radius:50%;",'%[data-state~="loggedIn"] %text':"color:[txt];[fnt]  display:inline-block;vertical-align:middle;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;min-width:60px;",'%[data-state~="loggedIn"] %arrow':"display:inline-block;vertical-align:middle;opacity:0.6;padding-left:18px;padding-right:18px;",'%[data-state~="loggedIn"] %arrow path':"fill:[txt];",'%[data-state~="loggedIn"] %buttons':"padding-top:12px;padding-bottom:12px;white-space:nowrap;",'%[data-state~="ltr"] %icon':"padding-right:18px;padding-left:initial;",'%[data-state~="ltr"] %buttons':"padding-left:18px;padding-right:initial;",'%[data-state~="ltr"] %login':"padding-right:18px;padding-left:initial;",'%[data-state~="ltr"][data-state~="avatarOnly"] %arrow':"padding-right:18px;padding-left:initial;",'%[data-state~="ltr"][data-state~="noButtons"] %icon':"padding-left:18px;",'%[data-state~="rtl"] %icon':"padding-right:initial;padding-left:18px;",'%[data-state~="rtl"] %buttons':"padding-left:initial;padding-right:18px;",'%[data-state~="rtl"] %login':"padding-right:initial;padding-left:18px;",'%[data-state~="rtl"][data-state~="avatarOnly"] %arrow':"padding-right:initial;padding-left:18px;",'%[data-state~="rtl"][data-state~="noButtons"] %icon':"padding-right:18px;",'%[data-state~="left"] %dropdownMenu a > div:nth-child(2)':"padding-left:12px;padding-right:initial;",'%[data-state~="right"] %dropdownMenu a > div:nth-child(2)':"padding-left:initial;padding-right:12px;",'%[data-state~="loggedOut"]':"background-color:[bg-lgn];border:[brw-lgn] solid [brd-lgn];[rd-lgn]  [shd-lgn]  cursor:pointer;",'%[data-state~="loggedOut"]:hover,%[data-state~="loggedOut"][data-preview~="hover"]':"background-color:[bgh-lgn];",'%[data-state~="loggedOut"] %user,%[data-state~="loggedOut"] %dropdownMenu,%[data-state~="loggedOut"] %buttons':"display:none;",'%[data-state~="loggedOut"] %login':"white-space:nowrap;padding-top:12px;padding-bottom:12px;color:[txt-lgn];[fnt]",'%[data-state~="loggedOut"] %login:hover,%[data-state~="loggedOut"] %login[data-preview~="hover"]':"color:[txth-lgn];",'%[data-state~="loggedOut"] %login img':"display:inline-block;vertical-align:middle;padding-right:18px;padding-left:18px;"}},t["wysiwyg.viewer.skins.LoginSocialButtonSkin"]={react:[["a","link",[],{},["div","img",[],{}],["div","text",[],{}],["div","badge",[],{}]]],exports:{img:{skin:"skins.core.ImageNewSkin"}},params:{"badge-bg":"COLOR","badge-txt":"COLOR"},paramsDefaults:{"badge-bg":"color_14","badge-txt":"color_15"},css:{"%":"position:relative;display:inline-block;","% img":"border-radius:50%;","%badge":"background-color:[badge-bg];color:[badge-txt];border-radius:50%;position:absolute;top:0;text-align:center;height:18px;line-height:18px;"}},t}),define("loginSocialBar",["loginSocialBar/components/loginSocialBar","loginSocialBar/components/loginSocialButton","core","skins","loginSocialBar/skins/skins.json"],function(t,e,i,o,n){var r={loginSocialBar:t,loginSocialButton:e};return i.compRegistrar.register("wysiwyg.viewer.components.LoginSocialBar",r.loginSocialBar,!0).register("wysiwyg.viewer.components.LoginSocialButton",r.loginSocialButton,!0),o.skinsMap.addBatch(n),r});
//# sourceMappingURL=loginSocialBar.min.js.map